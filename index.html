<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Materialize CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="src/materialize/css/materialize.css">
    <title>DogApp</title>
</head>

<body>
    <!-- General Styling -->
    <style>
        .noselect {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        ul .activeMessageSelectionText {
            color: white !important;
        }

        ul .activeMessageSelection {
            background-color: sandybrown !important;
        }

        ul .activeDogSelectionText {
            color: white !important;
        }

        ul .activeDogSelection {
            background-color: sandybrown !important;
        }
    </style>

    <!-- Navbar -->
    <nav class="orange darken-1 noselect">
        <div class="nav-wrapper container">
            <a class="brand-logo">Dinder</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li class="orange lighten-1 waves-effect waves-light "><a class="modal-trigger" href="#userProfile">Edit
                        User Profile</a></li>
                <li class="orange lighten-1 waves-effect waves-light "><a class="modal-trigger" href="#registerDog">Add
                        Doggo</a></li>
                <li style="margin: 0px 2em;" class="noselect"> Welcome Back User </li>
            </ul>
        </div>
    </nav>


    <!--  Main Body -->
    <section class="login">
        <div class="section">

        </div>
        <div class="section row noselect">
            <!--  User Dog Selector -->
            <div class="col s3">
                <ul class="collection with-header my-dog-select">
                    <li class="collection-header orange darken-1 white-text">
                        <h4>User Dogs</h4>
                    </li>
                    <a class="collection-item avatar" id='jas2'>
                        <img src="src/jas.jpg" alt="" class="circle">
                        <span class="title orange-text">Justice Antonin Scalia</span>
                    </a>
                    <a class="collection-item avatar" id='jrbg2'>
                        <img src="src/jrbg.png" alt="" class="circle">
                        <span class="title orange-text">Justice Ruth <br> Bader Ginsburg</span>
                    </a>
                    <a class="collection-item avatar" id='jsa2'>
                        <img src="src/jsa.jpg" alt="" class="circle">
                        <span class="title orange-text">Justice Samuel Alito</span>
                    </a>
                </ul>
            </div>

            <!--  Message Selector -->
            <div class="col s3">
                <ul class="collection with-header old-pal-select">
                    <li class="collection-header orange darken-1 white-text">
                        <h4>Selected Dog Pals</h4>
                    </li>
                    <a class="collection-item avatar" id='jas'>
                        <img src="src/jas.jpg" alt="" class="circle">
                        <span class="title orange-text">Justice Antonin Scalia</span>
                    </a>
                    <a class="collection-item avatar" id='jrbg'>
                        <img src="src/jrbg.png" alt="" class="circle">
                        <span class="title orange-text">Justice Ruth <br> Bader Ginsburg</span>
                    </a>
                    <a class="collection-item avatar" id='jsa'>
                        <img src="src/jsa.jpg" alt="" class="circle">
                        <span class="title orange-text">Justice Samuel Alito</span>
                    </a>
                </ul>
            </div>

            <!--  Slider Area -->
            <div class="col s6">
                <ul class="collection with-header new-pal-slider">
                    <li class="collection-header orange darken-1 white-text">
                        <h4>Slider</h4>
                    </li>
                    <div style="margin-top: -1px" class="carousel carousel-slider center">
                        <div class="carousel-fixed-item left new-pal-btn">
                            <a class="col s1"></a>
                            <a class="btn waves-effect white deep-orange-text darken-text-2 col s4">Accept</a>
                            <a class="col s2"></a>
                            <a class="btn waves-effect white deep-orange-text darken-text-2 col s4">Deny</a>
                            <a class="col s1"></a>
                        </div>
                        <div class="carousel-item red white-text" href="#one!">
                            <h2>Current Suggestion</h2>
                            <p class="white-text">This is your first panel</p>
                        </div>
                        <div class="carousel-item blue white-text" href="#two!">
                            <h2>Next Suggestion</h2>
                            <p class="white-text">This is your second panel</p>
                        </div>
                    </div>
                </ul>

                <!--  Message Area -->
                <ul class="collection with-header old-pal-messager">
                    <li class="collection-header orange darken-1 white-text row">
                        <h4 class="col s8">Message</h4>
                        <h4 href="#" class="btn btn-flat waves-effect waves-light amber return-to-swipe-btn">Return to
                            swiping</h4>
                    </li>
                    <li class="collection-item">
                        <div class="input-field send-message row">
                            <input placeholder="Message Here" id="msg" type="text" class="col s10">
                            <a href="#" class="btn btn-flat waves-effect waves-light amber">Send</a>
                        </div>
                    </li>
                    <li class="collection-item">
                        <span class="title">Name</span>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident, error.</p>
                    </li>
                    <li class="collection-item">
                        <span class="title">Name</span>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident, error.</p>
                    </li>
                    <li class="collection-item">
                        <span class="title">Name</span>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident, error.</p>
                    </li>
                    <li class="collection-item">
                        <span class="title">Name</span>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident, error.</p>
                    </li>
                    <li class="collection-item">
                        <span class="title">Name</span>
                        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Architecto illo natus, ut culpa
                            unde quasi, quibusdam repudiandae odit provident quos quam in odio facere molestiae?
                            Reprehenderit, blanditiis! Blanditiis veniam voluptate fugit quibusdam, provident corrupti
                            doloremque nemo temporibus eaque placeat magnam.</p>
                    </li>
                    <li class="collection-item">
                        <span class="title">Name</span>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident, error.</p>
                    </li>
                </ul>
            </div>

            <!-- Modals -->
            <style>
                .modal {
                    height: 100% !important
                }
            </style>

            <!-- User Profile Modal -->
            <div id="userProfile" class="modal">
                <div class="modal-content">
                    <h4>User Profile</h4>
                    <p>Things</p>
                </div>
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-light btn-flat">Save</a>
                </div>
            </div>

            <!-- Register Dog Modal -->
            <div id="registerDog" class="modal">
                <div class="modal-content">
                    <div class="collection with-header">
                        <div class="collection-header orange darken-1 white-text">
                            <h4>Register Doggo</h4>
                        </div>
                    </div>
                    <div class="input-field col s6">
                        <input id="dogNameText" type="text" class="">
                        <label for="dogName">Name</label>
                    </div>
                    <div class="input-field col s6">
                        <select multiple class="charSel">
                            <option value="" disabled selected>Select all that apply</option>
                            <option value="Friendly">Friendly</option>
                            <option value="Aggressive">Aggressive</option>
                            <option value="Playful">Playful</option>
                            <option value="Not good with children">Not good with children</option>
                            <option value="Not good with puppies">Not good with puppies</option>
                        </select>
                        <label>Temperament</label>
                    </div>
                    <div class="input-field col s6">
                        <select class="genSel">
                            <option value="None" disabled selected>Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                        <label>Gender</label>
                    </div>
                    <div class="input-field col s6">
                        <input type="text" id="autocomplete-input" class="autocomplete breedAuto">
                        <label for="autocomplete-input">Breed</label>
                    </div>
                    <div class="input-field col s6">
                        <select class="fixSel">
                            <option value="None" disabled selected>Fixed?</option>
                            <option value="True">Yes</option>
                            <option value="False">No</option>
                        </select>
                        <label>Fixed</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="dogWeightText" type="text" class="">
                        <label for="dogWeight">Weight</label>
                    </div>
                    <div class="col s2">
                        <img src="src/jas.jpg" alt="" class="responsive-img">
                    </div>
                    <div class="file-field input-field col s4">
                        <div class="btn btn-flat">
                            <span>Upload Profile Picture</span>
                            <input type="file">
                        </div>
                    </div>
                </div>
                <!-- Modal Button -->
                <div class="modal-footer">
                    <a href="#!" class="modal-close waves-effect waves-light btn-flat">Register</a>
                </div>
            </div>
    </section>

    <!-- Script Area -->
    <script src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous">
        </script>
    <script src="src/materialize/js/materialize.js"></script>
    <script>
        var selectedMyDog
        var messageRecepient;

        // Initialize Carousel
        $('.carousel.carousel-slider').carousel({
            fullWidth: true,
            indicators: false
        });

        $(document).ready(function () {
            // Initialize Modals
            $('.modal').modal();
            // Initialize Dropdown Selectors
            $('select').formSelect();
            // Initialize Lookahead
            $.get("src/breeds.json", function (data) {
                arr = {};
                data.forEach(function (e) {
                    arr[e.name] = null;
                });
                $('input.autocomplete').autocomplete({
                    data: arr
                });
            });
        });
    </script>
    <script>
        // Login state of user
        var logstate = true;

        // Toggle sections based on user login state
        if (logstate) {
            $('.logout').hide();
            $('.login').show();
        } else {
            $('.login').hide();
            $('.logout').show();
        }

        // Initially hide message function until a dog pal is selected. Will need to be placed in a function
        $('.old-pal-messager').hide();

        // Initial user dog selection. will be given first returned dog id. Will need to be placed in a function
        selectedMyDog = 'jas2';
        var parent = $(`#${selectedMyDog}`);
        parent.addClass("activeDogSelection");
        parent[0].childNodes[3].classList.add("activeDogSelectionText");

        // Return values from modal. For use with post
        $('.modal-trigger').click(function (d) {
            var target = d.target.attributes.href.nodeValue;
            // reset params
            // if (target == "#registerDog") {
            //     $('.breedAuto').val("");
            //     $('.charSel').val([]);
            //     $('.genSel').val("None");
            //     $('.fixSel').val("None");
            //     $('#dogNameText').val("");
            //     $('#dogWeightText').val("");
            //     $('.input-field label').removeClass('active');
            // }
        });

        // setInterval(function () {
        //     var a = $('.breedAuto').val();
        //     var b = $('.charSel').val();
        //     var c = $('.genSel').val();
        //     var d = $('.fixSel').val();
        //     var e = $('#dogNameText').val();
        //     var f = $('#dogWeightText').val();
        //     console.log(a);
        //     console.log(b);
        //     console.log(c);
        //     console.log(d);
        //     console.log(e);
        //     console.log(f);
        // }, 3000);

        // Carousel Buttons
        $('.new-pal-btn a').click(function (d) {
            if (d.target.text == "Accept") {
                $('.carousel.carousel-slider').carousel('prev');
            }
            if (d.target.text == "Deny") {
                $('.carousel.carousel-slider').carousel('next');
            }
            console.log(d.target.text);
        });

        // Select User dog
        $('.my-dog-select').click(function (d) {
            var targ = $(d.target.parentElement);
            var id;
            if (targ.prop("nodeName") == "A") {
                id = targ[0].id;
            } else {
                if (targ.prop("nodeName") == "LI") {
                    id = targ[0].parentElement.id;
                } else {
                    id = d.target.id;
                }
            }
            selectedMyDog = id;
            $('.activeDogSelection').removeClass('activeDogSelection')
            $('.activeDogSelectionText').removeClass('activeDogSelectionText')

            var parent = $(`#${id}`);
            parent.addClass("activeDogSelection");
            parent[0].childNodes[3].classList.add("activeDogSelectionText");

            console.log(id + ' is sending a message to ' + messageRecepient);
        });

        
        // Select message recipient dog
        $('.old-pal-select').click(function (d) {
            $('.new-pal-slider').fadeOut('fast', function () {
                $('.old-pal-messager').fadeIn('fast');
            });

            var targ = $(d.target.parentElement);
            var id;
            if (targ.prop("nodeName") == "A") {
                id = targ[0].id;
            } else {
                if (targ.prop("nodeName") == "LI") {
                    id = targ[0].parentElement.id;
                } else {
                    id = d.target.id;
                }
            }
            messageRecepient = id;
            $('.activeMessageSelection').removeClass('activeMessageSelection')
            $('.activeMessageSelectionText').removeClass('activeMessageSelectionText')

            var parent = $(`#${id}`);
            parent.addClass("activeMessageSelection");
            parent[0].childNodes[3].classList.add("activeMessageSelectionText");
            console.log(parent[0].childNodes[3]);

            console.log(selectedMyDog + ' is sending a message to ' + id);
        });

        // Return to swipe button inside message section
        $('.return-to-swipe-btn').click(function () {
            $('.old-pal-messager').fadeOut('fast', function () {
                $('.new-pal-slider').fadeIn('fast');
            });
            console.log('Swipe Mode');
        });

        // Send button inside message section
        $('.send-message').click(function (d) {
            if (d.target.nodeName == 'A') {
                console.log('sent: ' + $('#msg').val() + ' to ' + messageRecepient);
                $('#msg').val("");
            }
        })


    </script>
</body>

</html>